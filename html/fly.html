<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¤ªç©ºæ¢é™©è€… - ç§»åŠ¨ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            touch-action: manipulation;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            padding: 10px;
            color: #fff;
        }
        
        .game-wrapper {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 0 10px;
        }
        
        .game-title {
            font-size: 1.8rem;
            font-weight: 700;
            text-shadow: 0 0 10px #00b3ff;
            letter-spacing: 1px;
        }
        
        .score-container {
            font-size: 1.5rem;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 15px;
            border-radius: 20px;
            border: 2px solid #00b3ff;
        }
        
        .game-container {
            position: relative;
            width: 100%;
            height: 65vh;
            max-height: 500px;
            background: linear-gradient(to bottom, #0a1128, #001f3f);
            border-radius: 12px;
            border: 3px solid #00b3ff;
            box-shadow: 0 0 20px rgba(0, 179, 255, 0.4);
            overflow: hidden;
        }
        
        /* æ˜Ÿç©ºèƒŒæ™¯ */
        .star {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            animation: twinkle 3s infinite alternate;
        }
        
        /* æœˆçƒåœ°é¢ */
        .ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 40px;
            background: linear-gradient(to top, #9d9d9d, #c0c0c0);
            z-index: 2;
        }
        
        .ground-line {
            position: absolute;
            top: 0;
            width: 200%;
            height: 3px;
            background: repeating-linear-gradient(
                to right, transparent, transparent 20px, 
                #e0e0e0 20px, #e0e0e0 40px
            );
            animation: groundMove 1s linear infinite;
        }
        
        /* éšœç¢ç‰© */
        .crater {
            position: absolute;
            bottom: 40px;
            width: 30px;
            height: 15px;
            background: #909090;
            border-radius: 50%;
            z-index: 5;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
        }
        
        .satellite {
            position: absolute;
            width: 25px;
            height: 25px;
            z-index: 5;
            background: radial-gradient(circle, #ffcc00, #ff9900);
            border-radius: 50%;
            box-shadow: 0 0 10px #ffcc00;
        }
        
        .satellite::before {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            width: 15px;
            height: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 50%;
        }
        
        /* å®‡èˆªå‘˜å®¹å™¨ */
        #astronaut-container {
            position: absolute;
            bottom: 40px;
            left: 60px;
            width: 50px;
            height: 80px;
            z-index: 10;
            transition: bottom 0.1s;
        }
        
        /* æ¸¸æˆUI */
        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 20, 40, 0.9);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #00b3ff;
            text-align: center;
            display: none;
            z-index: 20;
            width: 90%;
            max-width: 400px;
            backdrop-filter: blur(5px);
        }
        
        .game-over-title {
            font-size: 2.5rem;
            color: #ff3366;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 51, 102, 0.5);
        }
        
        .final-score {
            font-size: 1.8rem;
            margin-bottom: 25px;
        }
        
        .restart-btn {
            padding: 12px 30px;
            font-size: 1.2rem;
            background: linear-gradient(to right, #00b3ff, #0066ff);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            letter-spacing: 1px;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(0, 179, 255, 0.5);
        }
        
        .restart-btn:active {
            transform: scale(0.95);
            background: linear-gradient(to right, #0099cc, #0055cc);
        }
        
        .instructions {
            text-align: center;
            margin-top: 20px;
            font-size: 1.1rem;
            color: #a0d0ff;
            padding: 0 10px;
        }
        
        .mobile-controls {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 20px;
            padding: 0 10px;
        }
        
        .control-btn {
            width: 80px;
            height: 80px;
            background: rgba(0, 179, 255, 0.3);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            border: 2px solid #00b3ff;
            color: #fff;
            cursor: pointer;
            touch-action: manipulation;
            user-select: none;
        }
        
        /* åŠ¨ç”» */
        @keyframes groundMove {
            from { transform: translateX(0); }
            to { transform: translateX(-40px); }
        }
        
        @keyframes twinkle {
            0% { opacity: 0.3; }
            100% { opacity: 1; }
        }
        
        @keyframes astronautRun {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            50% { transform: rotate(0deg); }
            75% { transform: rotate(-5deg); }
            100% { transform: rotate(0deg); }
        }
        
        @keyframes astronautJump {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-120px) rotate(-10deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        .running {
            animation: astronautRun 0.8s infinite linear;
        }
        
        .jumping {
            animation: astronautJump 0.7s ease-out;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .game-title {
                font-size: 1.5rem;
            }
            
            .score-container {
                font-size: 1.3rem;
                padding: 6px 12px;
            }
            
            .game-container {
                height: 55vh;
            }
            
            #astronaut-container {
                left: 40px;
                width: 40px;
                height: 60px;
            }
            
            .control-btn {
                width: 70px;
                height: 70px;
                font-size: 1.8rem;
            }
        }
        
        @media (max-width: 480px) {
            .game-header {
                flex-direction: column;
                gap: 10px;
            }
            
            .game-title {
                font-size: 1.3rem;
            }
            
            .game-container {
                height: 50vh;
            }
            
            #astronaut-container {
                left: 30px;
                width: 35px;
                height: 50px;
            }
            
            .mobile-controls {
                gap: 30px;
            }
            
            .control-btn {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
            
            .instructions {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-wrapper">
        <div class="game-header">
            <div class="game-title">ğŸš€ å¤ªç©ºæ¢é™©è€…</div>
            <div class="score-container">è·ç¦»: <span id="score">0</span>ç±³</div>
        </div>
        
        <div class="game-container" id="game-container">
            <!-- æ˜Ÿç©ºèƒŒæ™¯ç”±JSç”Ÿæˆ -->
            
            <!-- å®‡èˆªå‘˜SVG -->
            <div id="astronaut-container">
                <svg id="astronaut" width="100%" height="100%" viewBox="0 0 100 160">
                    <!-- èº«ä½“ -->
                    <rect x="30" y="50" width="40" height="60" rx="10" fill="#FFFFFF" stroke="#A0D0FF" stroke-width="2"/>
                    
                    <!-- å¤´ç›” -->
                    <circle cx="50" cy="40" r="25" fill="#A0D0FF" stroke="#70A0FF" stroke-width="2"/>
                    <circle cx="50" cy="40" r="18" fill="#D0F0FF" stroke="#70A0FF" stroke-width="1"/>
                    
                    <!-- é¢ç½© -->
                    <circle cx="50" cy="40" r="15" fill="#E0F7FF" stroke="#70A0FF" stroke-width="0.5"/>
                    
                    <!-- èƒŒåŒ… -->
                    <rect x="20" y="70" width="20" height="35" rx="5" fill="#303060" stroke="#202050" stroke-width="1"/>
                    
                    <!-- æ‰‹è‡‚ - å·¦ -->
                    <path d="M30 60 L15 50 L10 70 L25 75 Z" fill="#FFFFFF" stroke="#A0D0FF" stroke-width="1"/>
                    
                    <!-- æ‰‹è‡‚ - å³ -->
                    <path d="M70 60 L85 50 L90 70 L75 75 Z" fill="#FFFFFF" stroke="#A0D0FF" stroke-width="1"/>
                    
                    <!-- è…¿ - å·¦ -->
                    <path d="M35 110 L30 140 L40 145 L45 115 Z" fill="#FFFFFF" stroke="#A0D0FF" stroke-width="1"/>
                    
                    <!-- è…¿ - å³ -->
                    <path d="M65 110 L70 140 L60 145 L55 115 Z" fill="#FFFFFF" stroke="#A0D0FF" stroke-width="1"/>
                </svg>
            </div>
            
            <!-- åœ°é¢ -->
            <div class="ground">
                <div class="ground-line"></div>
            </div>
            
            <!-- æ¸¸æˆç»“æŸç”»é¢ -->
            <div class="game-over" id="game-over">
                <div class="game-over-title">ä»»åŠ¡å¤±è´¥!</div>
                <div class="final-score">è·ç¦»: <span id="final-score">0</span>ç±³</div>
                <button class="restart-btn" id="restart-btn">é‡æ–°å‡ºå‘</button>
            </div>
        </div>
        
        <div class="instructions">
            ç©ºæ ¼é”®/ç‚¹å‡»å±å¹•è·³è·ƒ - èº²é¿é™¨çŸ³å‘å’Œå«æ˜Ÿ
        </div>
        
        <div class="mobile-controls">
            <div class="control-btn" id="jump-btn">â†‘</div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–å˜é‡
        const container = document.getElementById('game-container');
        const astronautContainer = document.getElementById('astronaut-container');
        const astronaut = document.getElementById('astronaut');
        const scoreDisplay = document.getElementById('score');
        const finalScoreDisplay = document.getElementById('final-score');
        const gameOverScreen = document.getElementById('game-over');
        const restartBtn = document.getElementById('restart-btn');
        const jumpBtn = document.getElementById('jump-btn');

        let gameSpeed = 6;
        let score = 0;
        let isJumping = false;
        let isGameOver = false;
        let obstacles = [];
        let gameId;
        let lastFrameTime = 0;
        const frameRate = 60;
        const frameInterval = 1000 / frameRate;

        // åˆ›å»ºæ˜Ÿç©ºèƒŒæ™¯
        function createStars() {
            for (let i = 0; i < 80; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                const size = Math.random() * 3 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.animationDelay = `${Math.random() * 3}s`;
                container.appendChild(star);
            }
        }

        // ç”Ÿæˆéšœç¢ç‰©
        function createObstacle() {
            if (isGameOver) return;

            const obstacleType = Math.random() > 0.4 ? 'crater' : 'satellite';
            const obstacle = document.createElement('div');
            obstacle.className = `obstacle ${obstacleType}`;
            
            if (obstacleType === 'crater') {
                obstacle.style.bottom = '40px';
                obstacle.style.height = `${15 + Math.random() * 10}px`;
                obstacle.style.width = `${30 + Math.random() * 20}px`;
            } else {
                // å«æ˜Ÿåœ¨ç¦»åœ°ä¸€å®šé«˜åº¦é£è¡Œ
                const height = 80 + Math.random() * 60;
                obstacle.style.bottom = `${height}px`;
                obstacle.style.width = '25px';
                obstacle.style.height = '25px';
            }
            
            obstacle.style.right = '-50px';
            container.appendChild(obstacle);
            obstacles.push({
                element: obstacle,
                type: obstacleType,
                passed: false
            });
        }

        // è·³è·ƒæ§åˆ¶
        function jump() {
            if (isJumping || isGameOver) return;
            
            isJumping = true;
            astronautContainer.classList.remove('running');
            astronautContainer.classList.add('jumping');
            
            // æ·»åŠ è·³è·ƒéŸ³æ•ˆ
            const jumpSound = new Audio("data:audio/wav;base64,UklGRigEAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQEAAD//wIA/f38+/r5+fj39/b19fTz8/Lx8fDw7+/u7u3t7ezs7Ovr6+rq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq");
            jumpSound.volume = 0.3;
            jumpSound.play().catch(e => console.log("Audio play failed:", e));
            
            setTimeout(() => {
                isJumping = false;
                astronautContainer.classList.remove('jumping');
                astronautContainer.classList.add('running');
            }, 700);
        }

        // ç¢°æ’æ£€æµ‹
        function checkCollision(obstacle) {
            const astroRect = astronautContainer.getBoundingClientRect();
            const obsRect = obstacle.element.getBoundingClientRect();
            
            // ç¢°æ’æ£€æµ‹ç®€åŒ–
            const astroLeft = astroRect.left + 15;
            const astroRight = astroRect.right - 15;
            const astroTop = astroRect.top + 20;
            const astroBottom = astroRect.bottom - 10;
            
            const obsLeft = obsRect.left;
            const obsRight = obsRect.right;
            const obsTop = obsRect.top;
            const obsBottom = obsRect.bottom;
            
            return (
                astroRight > obsLeft + 10 &&
                astroLeft < obsRight - 10 &&
                astroTop < obsBottom &&
                astroBottom > obsTop
            );
        }

        // æ¸¸æˆä¸»å¾ªç¯
        function gameLoop(timestamp) {
            if (isGameOver) return;
            
            // æ§åˆ¶å¸§ç‡
            if (timestamp - lastFrameTime < frameInterval) {
                requestAnimationFrame(gameLoop);
                return;
            }
            
            lastFrameTime = timestamp;
            
            // æ›´æ–°åˆ†æ•°
            score++;
            scoreDisplay.textContent = Math.floor(score/10);
            
            // æ¯500åˆ†å¢åŠ é€Ÿåº¦
            if (score % 500 === 0) {
                gameSpeed += 0.5;
                
                // æ·»åŠ é€Ÿåº¦æå‡æ•ˆæœ
                const speedEffect = document.createElement('div');
                speedEffect.style.position = 'absolute';
                speedEffect.style.top = '20px';
                speedEffect.style.left = '50%';
                speedEffect.style.transform = 'translateX(-50%)';
                speedEffect.style.color = '#00ffaa';
                speedEffect.style.fontSize = '24px';
                speedEffect.style.fontWeight = 'bold';
                speedEffect.style.textShadow = '0 0 10px #00ffaa';
                speedEffect.textContent = 'é€Ÿåº¦æå‡!';
                container.appendChild(speedEffect);
                
                setTimeout(() => {
                    container.removeChild(speedEffect);
                }, 1000);
            }
            
            // ç§»åŠ¨éšœç¢ç‰©å¹¶æ£€æµ‹ç¢°æ’
            for (let i = obstacles.length - 1; i >= 0; i--) {
                const obstacle = obstacles[i];
                const currentRight = parseInt(obstacle.element.style.right) || -50;
                obstacle.element.style.right = `${currentRight + gameSpeed}px`;
                
                // ç¢°æ’æ£€æµ‹
                if (checkCollision(obstacle)) {
                    gameOver();
                    return;
                }
                
                // ç§»é™¤å±å¹•å¤–çš„éšœç¢ç‰©
                if (currentRight > container.offsetWidth + 50) {
                    obstacle.element.remove();
                    obstacles.splice(i, 1);
                }
            }
            
            requestAnimationFrame(gameLoop);
        }

        // æ¸¸æˆç»“æŸ
        function gameOver() {
            isGameOver = true;
            finalScoreDisplay.textContent = Math.floor(score/10);
            gameOverScreen.style.display = 'block';
            astronautContainer.classList.remove('running');
            
            // æ·»åŠ çˆ†ç‚¸æ•ˆæœ
            const explosion = document.createElement('div');
            explosion.style.position = 'absolute';
            explosion.style.width = '100px';
            explosion.style.height = '100px';
            explosion.style.background = 'radial-gradient(circle, #ff8800, #ff3300)';
            explosion.style.borderRadius = '50%';
            explosion.style.zIndex = '15';
            explosion.style.top = `${astronautContainer.offsetTop - 50}px`;
            explosion.style.left = `${astronautContainer.offsetLeft - 50}px`;
            explosion.style.opacity = '0.8';
            explosion.style.animation = 'explode 0.5s forwards';
            
            container.appendChild(explosion);
            
            // æ·»åŠ çˆ†ç‚¸éŸ³æ•ˆ
            const explosionSound = new Audio("data:audio/wav;base64,UklGRigEAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQEAAD//wIA/f38+/r5+fj39/b19fTz8/Lx8fDw7+/u7u3t7ezs7Ovr6+rq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq6urq");
            explosionSound.volume = 0.4;
            explosionSound.play().catch(e => console.log("Audio play failed:", e));
            
            setTimeout(() => {
                explosion.remove();
            }, 500);
        }

        // é‡æ–°å¼€å§‹
        function restartGame() {
            // æ¸…é™¤éšœç¢ç‰©
            obstacles.forEach(obs => obs.element.remove());
            obstacles = [];
            
            // é‡ç½®çŠ¶æ€
            isGameOver = false;
            score = 0;
            gameSpeed = 6;
            astronautContainer.style.bottom = '40px';
            astronautContainer.classList.add('running');
            gameOverScreen.style.display = 'none';
            
            // é‡æ–°å¼€å§‹æ¸¸æˆå¾ªç¯
            lastFrameTime = 0;
            requestAnimationFrame(gameLoop);
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        function init() {
            createStars();
            
            // æ·»åŠ è·‘æ­¥åŠ¨ç”»
            astronautContainer.classList.add('running');
            
            // éšœç¢ç‰©ç”Ÿæˆå™¨
            setInterval(createObstacle, 1500);
            
            // é”®ç›˜æ§åˆ¶
            document.addEventListener('keydown', (e) => {
                if ((e.code === 'Space' || e.key === 'ArrowUp') && !isGameOver) {
                    jump();
                }
            });
            
            // è§¦æ‘¸æ§åˆ¶
            container.addEventListener('touchstart', (e) => {
                if (!isGameOver) {
                    e.preventDefault();
                    jump();
                }
            });
            
            jumpBtn.addEventListener('click', jump);
            jumpBtn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                jump();
            });
            
            restartBtn.addEventListener('click', restartGame);
            
            // å¯åŠ¨æ¸¸æˆå¾ªç¯
            requestAnimationFrame(gameLoop);
        }

        // æ·»åŠ çˆ†ç‚¸åŠ¨ç”»æ ·å¼
        const style = document.createElement('style');
        style.textContent = `
            @keyframes explode {
                0% { transform: scale(0); opacity: 0.8; }
                70% { transform: scale(1.5); opacity: 0.6; }
                100% { transform: scale(2); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // å¯åŠ¨æ¸¸æˆ
        window.onload = init;
    </script>
</body>
</html>